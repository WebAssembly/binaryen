Before:
(module
)
After:
(module
)
Secondary:
(module
)


Before:
(module
 (type $i32_=>_none (func (param i32)))
 (memory $mem (shared 3 42))
 (table $table 3 42 funcref)
 (global $glob (mut i32) (i32.const 7))
 (event $e (attr 0) (param i32))
)
After:
(module
 (type $i32_=>_none (func (param i32)))
 (memory $mem (shared 3 42))
 (table $table 3 42 funcref)
 (global $glob (mut i32) (i32.const 7))
 (event $e (attr 0) (param i32))
 (export "memory" (memory $mem))
 (export "table" (table $table))
 (export "global" (global $glob))
 (export "event" (event $e))
)
Secondary:
(module
 (type $i32_=>_none (func (param i32)))
 (import "primary" "memory" (memory $mem (shared 3 42)))
 (import "primary" "table" (table $table 3 42 funcref))
 (import "primary" "global" (global $glob (mut i32)))
 (import "primary" "event" (event $e (attr 0) (param i32)))
)


Before:
(module
 (type $i32_=>_i32 (func (param i32) (result i32)))
 (func $foo (param $0 i32) (result i32)
  (local.get $0)
 )
)
After:
(module
)
Secondary:
(module
 (type $i32_=>_i32 (func (param i32) (result i32)))
 (func $foo (param $0 i32) (result i32)
  (local.get $0)
 )
)


Before:
(module
 (type $i32_=>_i32 (func (param i32) (result i32)))
 (export "foo" (func $foo))
 (func $foo (param $0 i32) (result i32)
  (local.get $0)
 )
)
After:
(module
 (type $i32_=>_i32 (func (param i32) (result i32)))
 (import "placeholder" "0" (func $placeholder_0 (param i32) (result i32)))
 (table $0 1 funcref)
 (elem (i32.const 0) $placeholder_0)
 (export "foo" (func $foo))
 (func $foo (param $0 i32) (result i32)
  (call_indirect (type $i32_=>_i32)
   (local.get $0)
   (i32.const 0)
  )
 )
)
Secondary:
(module
 (type $i32_=>_i32 (func (param i32) (result i32)))
 (table $0 1 funcref)
 (elem (i32.const 0) $foo)
 (func $foo (param $0 i32) (result i32)
  (local.get $0)
 )
)


Before:
(module
 (type $i32_=>_i32 (func (param i32) (result i32)))
 (table $table 1 funcref)
 (elem (i32.const 0) $foo)
 (export "foo" (func $foo))
 (func $foo (param $0 i32) (result i32)
  (local.get $0)
 )
)
After:
(module
 (type $i32_=>_i32 (func (param i32) (result i32)))
 (import "placeholder" "0" (func $placeholder_0 (param i32) (result i32)))
 (table $table 1 funcref)
 (elem (i32.const 0) $placeholder_0)
 (export "foo" (func $foo))
 (export "table" (table $table))
 (func $foo (param $0 i32) (result i32)
  (call_indirect (type $i32_=>_i32)
   (local.get $0)
   (i32.const 0)
  )
 )
)
Secondary:
(module
 (type $i32_=>_i32 (func (param i32) (result i32)))
 (import "primary" "table" (table $table 1 funcref))
 (elem (i32.const 0) $foo)
 (func $foo (param $0 i32) (result i32)
  (local.get $0)
 )
)


Before:
(module
 (type $i32_=>_i32 (func (param i32) (result i32)))
 (table $table 1000 funcref)
 (elem (i32.const 42) $foo)
 (export "foo" (func $foo))
 (func $foo (param $0 i32) (result i32)
  (local.get $0)
 )
)
After:
(module
 (type $i32_=>_i32 (func (param i32) (result i32)))
 (import "placeholder" "42" (func $placeholder_42 (param i32) (result i32)))
 (table $table 1000 funcref)
 (elem (i32.const 42) $placeholder_42)
 (export "foo" (func $foo))
 (export "table" (table $table))
 (func $foo (param $0 i32) (result i32)
  (call_indirect (type $i32_=>_i32)
   (local.get $0)
   (i32.const 42)
  )
 )
)
Secondary:
(module
 (type $i32_=>_i32 (func (param i32) (result i32)))
 (import "primary" "table" (table $table 1000 funcref))
 (elem (i32.const 42) $foo)
 (func $foo (param $0 i32) (result i32)
  (local.get $0)
 )
)


Before:
(module
 (type $i32_=>_i32 (func (param i32) (result i32)))
 (func $foo (param $0 i32) (result i32)
  (local.get $0)
 )
)
After:
(module
 (type $i32_=>_i32 (func (param i32) (result i32)))
 (func $foo (param $0 i32) (result i32)
  (local.get $0)
 )
)
Secondary:
(module
)


Before:
(module
 (type $i32_=>_i32 (func (param i32) (result i32)))
 (export "foo" (func $foo))
 (func $foo (param $0 i32) (result i32)
  (local.get $0)
 )
)
After:
(module
 (type $i32_=>_i32 (func (param i32) (result i32)))
 (export "foo" (func $foo))
 (func $foo (param $0 i32) (result i32)
  (local.get $0)
 )
)
Secondary:
(module
)


Before:
(module
 (type $none_=>_none (func))
 (func $foo
  (nop)
 )
 (func $bar
  (call $foo)
 )
)
After:
(module
 (type $none_=>_none (func))
 (export "foo" (func $foo))
 (func $foo
  (nop)
 )
)
Secondary:
(module
 (type $none_=>_none (func))
 (import "primary" "foo" (func $foo))
 (func $bar
  (call $foo)
 )
)


Before:
(module
 (type $none_=>_none (func))
 (export "foo" (func $bar))
 (func $foo
  (nop)
 )
 (func $bar
  (call $foo)
 )
)
After:
(module
 (type $none_=>_none (func))
 (import "placeholder" "0" (func $placeholder_0))
 (table $0 1 funcref)
 (elem (i32.const 0) $placeholder_0)
 (export "foo" (func $bar))
 (export "foo_0" (func $foo))
 (func $foo
  (nop)
 )
 (func $bar
  (call_indirect (type $none_=>_none)
   (i32.const 0)
  )
 )
)
Secondary:
(module
 (type $none_=>_none (func))
 (import "primary" "foo_0" (func $foo))
 (table $0 1 funcref)
 (elem (i32.const 0) $bar)
 (func $bar
  (call $foo)
 )
)


Before:
(module
 (type $none_=>_none (func))
 (func $foo
  (nop)
 )
 (func $bar
  (call $foo)
 )
)
After:
(module
 (type $none_=>_none (func))
 (import "placeholder" "0" (func $placeholder_0))
 (table $0 1 funcref)
 (elem (i32.const 0) $placeholder_0)
 (func $bar
  (call_indirect (type $none_=>_none)
   (i32.const 0)
  )
 )
)
Secondary:
(module
 (type $none_=>_none (func))
 (table $0 1 funcref)
 (elem (i32.const 0) $foo)
 (func $foo
  (nop)
 )
)


Before:
(module
 (type $none_=>_none (func))
 (table $table 4 funcref)
 (elem (i32.const 0) $foo $bar $baz $quux)
 (func $foo
  (nop)
 )
 (func $bar
  (nop)
 )
 (func $baz
  (nop)
 )
 (func $quux
  (nop)
 )
)
After:
(module
 (type $none_=>_none (func))
 (import "placeholder" "0" (func $placeholder_0))
 (import "placeholder" "2" (func $placeholder_2))
 (table $table 4 funcref)
 (elem (i32.const 0) $placeholder_0 $bar $placeholder_2 $quux)
 (export "table" (table $table))
 (func $bar
  (nop)
 )
 (func $quux
  (nop)
 )
)
Secondary:
(module
 (type $none_=>_none (func))
 (import "primary" "table" (table $table 4 funcref))
 (elem (i32.const 0) $foo)
 (elem (i32.const 2) $baz)
 (func $baz
  (nop)
 )
 (func $foo
  (nop)
 )
)


Before:
(module
 (type $none_=>_none (func))
 (table $table 4 funcref)
 (elem (i32.const 0) $foo $bar $baz $quux)
 (func $foo
  (nop)
 )
 (func $bar
  (nop)
 )
 (func $baz
  (nop)
 )
 (func $quux
  (nop)
 )
)
After:
(module
 (type $none_=>_none (func))
 (import "placeholder" "0" (func $placeholder_0))
 (import "placeholder" "1" (func $placeholder_1))
 (import "placeholder" "3" (func $placeholder_3))
 (table $table 4 funcref)
 (elem (i32.const 0) $placeholder_0 $placeholder_1 $baz $placeholder_3)
 (export "table" (table $table))
 (func $baz
  (nop)
 )
)
Secondary:
(module
 (type $none_=>_none (func))
 (import "primary" "table" (table $table 4 funcref))
 (elem (i32.const 0) $foo $bar)
 (elem (i32.const 3) $quux)
 (func $bar
  (nop)
 )
 (func $foo
  (nop)
 )
 (func $quux
  (nop)
 )
)


Before:
(module
 (type $i32_=>_i32 (func (param i32) (result i32)))
 (table $table 1 1 funcref)
 (elem (i32.const 0) $foo)
 (func $foo (param $0 i32) (result i32)
  (call $bar
   (i32.const 0)
  )
 )
 (func $bar (param $0 i32) (result i32)
  (call $foo
   (i32.const 1)
  )
 )
)
After:
(module
 (type $i32_=>_i32 (func (param i32) (result i32)))
 (import "placeholder" "1" (func $placeholder_1 (param i32) (result i32)))
 (table $table 2 2 funcref)
 (elem (i32.const 0) $foo $placeholder_1)
 (export "table" (table $table))
 (export "foo" (func $foo))
 (func $foo (param $0 i32) (result i32)
  (call_indirect (type $i32_=>_i32)
   (i32.const 0)
   (i32.const 1)
  )
 )
)
Secondary:
(module
 (type $i32_=>_i32 (func (param i32) (result i32)))
 (import "primary" "table" (table $table 2 2 funcref))
 (elem (i32.const 1) $bar)
 (import "primary" "foo" (func $foo (param i32) (result i32)))
 (func $bar (param $0 i32) (result i32)
  (call $foo
   (i32.const 1)
  )
 )
)


