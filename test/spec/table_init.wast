;; NOTE: Assertions have been generated by update_lit_checks.py --output=fuzz-exec and should not be edited.

;; RUN: wasm-opt %s -all --fuzz-exec-before -q -o /dev/null 2>&1 | filecheck %s

;; The elem is out of bounds, leading to a trap during initialization.
(assert_unlinkable
  (module
    (table $table 1 1 funcref)
    (elem $elem (i32.const 1) $foo)
    (func $foo)
  )
  "trap"
)

;; Now it is in bounds, with the elem offset reduced to 0.
(module
  (table $table 1 1 funcref)
  (elem $elem (i32.const 0) $foo)
  (func $foo)
)

