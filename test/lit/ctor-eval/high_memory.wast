;; NOTE: Assertions have been generated by update_lit_checks.py --all-items and should not be edited.
;; RUN: wasm-ctor-eval %s --ctors=test --kept-exports=test --quiet -all -S -o - | filecheck %s

(module
 ;; CHECK:      (type $none_=>_none (func))

 ;; CHECK:      (memory $0 10)
 (memory $0 10)

 (func "test"
  ;; This write will be evalled into a data segment and removed.
  (i32.store8
   (i32.const 0x6400000) ;; 100 MB
   (i32.const 42)
  )
  ;; We stop at this write to a high address (wasm-ctor-eval generally only
  ;; writes to low addresses, so it is tuned for that)
  (i32.store8
   (i32.const 0x6400001) ;; 100 MB + 1
   (i32.const 43)
  )
 )
)
;; CHECK:      (export "test" (func $0))

;; CHECK:      (func $0 (type $none_=>_none)
;; CHECK-NEXT:  (i32.store8
;; CHECK-NEXT:   (i32.const 104857600)
;; CHECK-NEXT:   (i32.const 42)
;; CHECK-NEXT:  )
;; CHECK-NEXT:  (i32.store8
;; CHECK-NEXT:   (i32.const 104857601)
;; CHECK-NEXT:   (i32.const 43)
;; CHECK-NEXT:  )
;; CHECK-NEXT: )
