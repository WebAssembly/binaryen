;; NOTE: Assertions have been generated by update_lit_checks.py --all-items and should not be edited.

;; RUN: wasm-split %s -all --no-placeholders --split-funcs=bar,baz -g -o1 %t.1.wasm -o2 %t.2.wasm
;; RUN: wasm-dis %t.1.wasm | filecheck %s --check-prefix PRIMARY
;; RUN: wasm-dis %t.2.wasm | filecheck %s --check-prefix SECONDARY

(module
 ;; PRIMARY:      (type $0 (func))

 ;; PRIMARY:      (table $0 2 funcref)

 ;; PRIMARY:      (elem $0 (table $0) (i32.const 0) funcref (item (ref.null nofunc)) (item (ref.null nofunc)))

 ;; PRIMARY:      (export "foo" (func $foo))

 ;; PRIMARY:      (export "table" (table $0))

 ;; PRIMARY:      (func $foo
 ;; PRIMARY-NEXT:  (call_indirect (type $0)
 ;; PRIMARY-NEXT:   (i32.const 0)
 ;; PRIMARY-NEXT:  )
 ;; PRIMARY-NEXT:  (call_indirect (type $0)
 ;; PRIMARY-NEXT:   (i32.const 1)
 ;; PRIMARY-NEXT:  )
 ;; PRIMARY-NEXT: )
 (func $foo
  (call $bar)
  (call $baz)
 )
 ;; SECONDARY:      (type $0 (func))

 ;; SECONDARY:      (import "primary" "table" (table $timport$0 2 funcref))

 ;; SECONDARY:      (import "primary" "foo" (func $foo))

 ;; SECONDARY:      (elem $0 (i32.const 0) $bar $baz)

 ;; SECONDARY:      (func $bar
 ;; SECONDARY-NEXT:  (call $foo)
 ;; SECONDARY-NEXT:  (call $baz)
 ;; SECONDARY-NEXT: )
 (func $bar
  (call $foo)
  (call $baz)
 )
 ;; SECONDARY:      (func $baz
 ;; SECONDARY-NEXT:  (call $foo)
 ;; SECONDARY-NEXT:  (call $bar)
 ;; SECONDARY-NEXT: )
 (func $baz
  (call $foo)
  (call $bar)
 )
)
