;; NOTE: Assertions have been generated by update_lit_checks.py --all-items and should not be edited.

;; RUN: wasm-merge %s first %s.second second -all -S -o - | filecheck %s

;; Test we rename tables and element segments properly at the module scope.
;; Table $foo has a name collision, and both of the element segments' names.

(module
  ;; CHECK:      (table $foo 1 funcref)
  (table $foo 1 funcref)

  ;; CHECK:      (table $bar 10 funcref)
  (table $bar 10 funcref)

  ;; CHECK:      (table $foo_2 100 funcref)

  ;; CHECK:      (table $other 1000 funcref)

  ;; CHECK:      (elem $a (table $foo) (i32.const 0) func)
  (elem $a (table $foo) (i32.const 0) func)

  ;; CHECK:      (elem $b (table $bar) (i32.const 0) func)
  (elem $b (table $bar) (i32.const 0) func)
)
;; CHECK:      (elem $a_2 (table $foo_2) (i32.const 0) func)

;; CHECK:      (elem $b_2 (table $other) (i32.const 0) func)
