;; NOTE: Assertions have been generated by update_lit_checks.py and should not be edited.

;; RUN: wasm-as %s -all --nominal -g -o %t.wasm
;; RUN: wasm-dis %t.wasm -all --hybrid -o - | filecheck %s

;; Check that the nominal binary format is parseable as isorecursive with a
;; single recursion group.

(module
  ;; CHECK:      (rec
  ;; CHECK-NEXT:  (type $make-super-t (func (result (ref $super))))

  ;; CHECK:       (type $make-sub-t (func (result (ref $sub))))

  ;; CHECK:       (type $super (struct (field i32)))
  (type $super (struct i32))
  ;; CHECK:       (type $sub (struct_subtype (field i32) $super))
  (type $sub (struct_subtype i32 $super))
  (type $make-super-t (func (result (ref $super))))
  (type $make-sub-t (func (result (ref $sub))))

  ;; CHECK:      (func $make-super (type $make-super-t) (result (ref $super))
  ;; CHECK-NEXT:  (unreachable)
  ;; CHECK-NEXT: )
  (func $make-super (type $make-super-t)
    (unreachable)
  )

  ;; CHECK:      (func $make-sub (type $make-sub-t) (result (ref $sub))
  ;; CHECK-NEXT:  (unreachable)
  ;; CHECK-NEXT: )
  (func $make-sub (type $make-sub-t)
    (unreachable)
  )
)
