;; NOTE: Assertions have been generated by update_lit_checks.py and should not be edited.

;; Check that string.as_wtf16 is accepted by the parser but is not translated
;; into any IR.

;; RUN: wasm-opt %s -all -S -o - | filecheck %s

(module
  ;; CHECK:      (func $empty (type $1)
  ;; CHECK-NEXT:  (nop)
  ;; CHECK-NEXT: )
  (func $empty
    (string.as_wtf16)
  )

  ;; CHECK:      (func $codeunit (type $0) (result i32)
  ;; CHECK-NEXT:  (stringview_wtf16.get_codeunit
  ;; CHECK-NEXT:   (string.const "abc")
  ;; CHECK-NEXT:   (i32.const 0)
  ;; CHECK-NEXT:  )
  ;; CHECK-NEXT: )
  (func $codeunit (result i32)
    (stringview_wtf16.get_codeunit
      (string.as_wtf16
        (string.const "abc")
      )
      (i32.const 0)
    )
  )

  ;; CHECK:      (func $length (type $0) (result i32)
  ;; CHECK-NEXT:  (string.measure_wtf16
  ;; CHECK-NEXT:   (string.const "abc")
  ;; CHECK-NEXT:  )
  ;; CHECK-NEXT: )
  (func $length (result i32)
    (stringview_wtf16.length
      (string.as_wtf16
        (string.const "abc")
      )
    )
  )
)
