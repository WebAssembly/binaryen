;; NOTE: Assertions have been generated by update_lit_checks.py and should not be edited.

;; RUN: env BINARYEN_PRINT_FULL=1 wasm-opt %s --remove-unused-brs -S -o - | filecheck %s

(module
 (func $test
  (loop $loop
   (if
    (i32.const 0)
    (then
     (block $block
      (if
       (block (result i32)
        ;; This can be removed, after which $block has no breaks and it will
        ;; become unreachable, as verified by PRINT_FULL.
        (br_if $block
         (i32.const 0)
        )
        (i32.const 0)
       )
       (then
        (br $loop)
       )
       (else
        (unreachable)
       )
      )
     )
    )
    (else
     (unreachable)
    )
   )
  )
 )
)
