;; NOTE: Assertions have been generated by update_lit_checks.py and should not be edited.

;; RUN: wasm-opt %s -o %t.wasm
;; RUN: wasm-opt %t.wasm --show-binary-offsets | filecheck %s

;; The -sbo flag makes us print binary offsets in wat text. Note that this works
;; even without -g for the names section (this is the reason for the name $0
;; below - it matches the name from the binary, so auto-updating this test
;; works properly).

(module
  ;; CHECK:      (func $0
  ;; CHECK-NEXT:  ;; code offset: 0x5
  ;; CHECK-NEXT:  (drop
  ;; CHECK-NEXT:   ;; code offset: 0x3
  ;; CHECK-NEXT:   (i32.const 0)
  ;; CHECK-NEXT:  )
  ;; CHECK-NEXT:  ;; code offset: 0x6
  ;; CHECK-NEXT:  (call $0)
  ;; CHECK-NEXT: )
  (func $0
    (drop
      (i32.const 0)
    )
    (call $0)
  )
)

