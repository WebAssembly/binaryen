;; NOTE: Assertions have been generated by update_lit_checks.py and should not be edited.

;; RUN: env BINARYEN_PRINT_FULL=1 wasm-opt %s --merge-blocks -S -o - | filecheck %s

;; The optimization below will replace the local.set with the block it contains
;; (i.e. it reorders them). While doing so we should keep the debug info of the
;; local.set.

(module
  (func $test
    (local $temp i32)

    ;; Everything here should stay with 200 as their debug info, while we
    ;; optimize (we can remove the inner block, move the call up to before
    ;; the local.set, and merge the outer blocks).

    ;;@ javaemul/internal/Exceptions.java:200:2
    (block
      (local.set $temp
        (block (result i32)
          (call $test)
          (i32.const 1)
        )
      )
    )
  )
)
