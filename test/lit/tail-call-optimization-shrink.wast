;; NOTE: Assertions have been generated by update_lit_checks.py --all-items and should not be edited.

;; RUN: foreach %s %t wasm-opt --tail-call-optimization --enable-tail-call --optimize-level 0 --shrink-level 2 -S -o - | filecheck %s

;; Tests for tail call optimization

(module
  ;; CHECK:      (type $0 (func (result i32)))

  ;; CHECK:      (func $f (result i32)
  ;; CHECK-NEXT:  (i32.const 0)
  ;; CHECK-NEXT: )
  (func $f (result i32)
    i32.const 0
  )
  ;; CHECK:      (func $implicit_return (result i32)
  ;; CHECK-NEXT:  (call $f)
  ;; CHECK-NEXT: )
  (func $implicit_return (result i32)
    call $f
  )
)
