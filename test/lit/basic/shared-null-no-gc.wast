;; NOTE: Assertions have been generated by update_lit_checks.py and should not be edited.

;; Test that we can write a binary without crashing when using a shared bottom
;; type without GC enabled.

;; RUN: wasm-opt %s --enable-reference-types --enable-shared-everything --roundtrip -S -o - | filecheck %s

(module
 ;; CHECK:      (func $test
 ;; CHECK-NEXT:  (drop
 ;; CHECK-NEXT:   (ref.null (shared nofunc))
 ;; CHECK-NEXT:  )
 ;; CHECK-NEXT: )
 (func $test
  (drop
   (ref.null (shared func))
  )
 )
)
