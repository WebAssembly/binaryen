;; NOTE: Assertions have been generated by update_lit_checks.py and should not be edited.
;; RUN: wasm-opt -all %s --roundtrip -S -o - | filecheck %s --check-prefix=RTRIP

(module
 ;; RTRIP:      (memory $0 23 256 shared)
 (memory $0 23 256 shared)

 ;; RTRIP:      (func $acqrel (type $0) (result i32)
 ;; RTRIP-NEXT:  (i32.atomic.load acqrel
 ;; RTRIP-NEXT:   (i32.const 1)
 ;; RTRIP-NEXT:  )
 ;; RTRIP-NEXT: )
 (func $acqrel (result i32)
   (i32.atomic.load acqrel
    (i32.const 1)
   )
 )

 ;; Optional seqcst ordering is dropped in text output.
 ;; RTRIP:      (func $seqcst (type $0) (result i32)
 ;; RTRIP-NEXT:  (drop
 ;; RTRIP-NEXT:   (i32.atomic.load
 ;; RTRIP-NEXT:    (i32.const 1)
 ;; RTRIP-NEXT:   )
 ;; RTRIP-NEXT:  )
 ;; RTRIP-NEXT:  (i32.atomic.load
 ;; RTRIP-NEXT:   (i32.const 1)
 ;; RTRIP-NEXT:  )
 ;; RTRIP-NEXT: )
 (func $seqcst (result i32)
   ;; seqcst may be omitted for atomic loads, it's the default
   (drop (i32.atomic.load seqcst
    (i32.const 1)
   ))
   ;; allows memory index before memory ordering immediate
   (i32.atomic.load 0 seqcst
    (i32.const 1)
   )
 )
)
