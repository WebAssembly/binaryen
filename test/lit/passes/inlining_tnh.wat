;; NOTE: Assertions have been generated by update_lit_checks.py --all-items and should not be edited.

;; RUN: foreach %s %t wasm-opt --inlining      -S -o - | filecheck %s
;; RUN: foreach %s %t wasm-opt --inlining -tnh -S -o - | filecheck %s

;; Check that with or without TrapsNeverHappen, we inline calls to trapping
;; functions. That propagates the unreachability for other passes.

(module
  (func $call-trap
    (call $trap)
  )

  (func $trap
    (unreachable)
  )

  (func $call-trap-value
    (drop
      (call $trap-value)
    )
  )

  (func $trap-value (result i32)
    (unreachable)
  )
)
