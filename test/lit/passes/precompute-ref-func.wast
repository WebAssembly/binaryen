;; NOTE: Assertions have been generated by update_lit_checks.py --all-items and should not be edited.
;; RUN: wasm-opt %s -all --precompute -S -o - | filecheck %s

(module
  ;; CHECK:      (type $0 (func (result funcref)))

  ;; CHECK:      (type $shared-func (shared (func (result (ref null (shared func))))))
  (type $shared-func (shared (func (result (ref null (shared func))))))
  ;; CHECK:      (elem declare func $test $test-shared)

  ;; CHECK:      (func $test (type $0) (result funcref)
  ;; CHECK-NEXT:  (return
  ;; CHECK-NEXT:   (ref.func $test)
  ;; CHECK-NEXT:  )
  ;; CHECK-NEXT: )
  (func $test (result funcref)
    (block
      (return
        (ref.func $test)
      )
    )
  )

  ;; CHECK:      (func $test-shared (type $shared-func) (result (ref null (shared func)))
  ;; CHECK-NEXT:  (return
  ;; CHECK-NEXT:   (ref.func $test-shared)
  ;; CHECK-NEXT:  )
  ;; CHECK-NEXT: )
  (func $test-shared (type $shared-func)
    (block
      (return
        (ref.func $test-shared)
      )
    )
  )
)
