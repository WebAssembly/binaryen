;; NOTE: Assertions have been generated by update_lit_checks.py --all-items and should not be edited.
;; NOTE: This test was ported using port_test.py and could be cleaned up.

;; RUN: not wasm-opt %s --stack-check --enable-memory64 -S -o - 2>&1 | filecheck %s

(module
 ;; if __stack_base and __stack_end are missing, the stack check pass should error
 (memory i64 (data))
 (global $sp (mut i64) (i64.const 0))
 (export "use_stack" (func $0))
 (func $0 (result i64)
  (global.set $sp (i64.const 42))
  (global.get $sp)
 )
)
;; CHECK: Fatal: cannot do stack checking without __stack_base variable
