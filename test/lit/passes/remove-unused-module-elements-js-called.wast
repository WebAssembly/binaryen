;; NOTE: Assertions have been generated by update_lit_checks.py --all-items and should not be edited.

;; RUN: foreach %s %t wasm-opt --remove-unused-module-elements --closed-world -all -S -o - | filecheck %s

(module
  (@binaryen.js.called)
  (func $js.called.referred
    ;; This is jsCalled, and referred below, so it is kept.
    (drop (i32.const 10))
  )

  (func $export (export "export")
    (drop (ref.func $js.called.referred))
  )

  (@binaryen.js.called)
  (func $js.called.unreferred
    ;; This is jsCalled, and not referred anywhere. The annotation does not
    ;; stop the function from being removed entirely.
    (drop (i32.const 20))
  )
)
