;; NOTE: Assertions have been generated by update_lit_checks.py and should not be edited.

;; RUN: wasm-opt %s -all --closed-world --abstract-type-refining -S -o - | filecheck %s

(module
 ;; CHECK:      (rec
 ;; CHECK-NEXT:  (type $foo (struct))
 (type $foo (struct))

 ;; CHECK:      (func $test (type $1)
 ;; CHECK-NEXT:  (local $0 (ref none))
 ;; CHECK-NEXT: )
 (func $test
  ;; $foo will be replaced with none` and the exactness should be dropped
  ;; without errors.
  (local (ref (exact $foo)))
 )
)
