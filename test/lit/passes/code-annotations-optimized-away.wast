;; NOTE: Assertions have been generated by update_lit_checks.py and should not be edited.

;; RUN: wasm-opt %s --monomorphize --roundtrip -all -S -o - | filecheck %s

;; The callee, which we will monomorphize, has a branch hint. The hinted code
;; will end up vanishing entirely, but not the function it is in, so we end up
;; with an annotation without an instruction in the binary for it. We should
;; ignore it and not error.
(module
 ;; CHECK:      (func $callee (type $1) (param $0 i32)
 ;; CHECK-NEXT:  (nop)
 ;; CHECK-NEXT: )
 (func $callee (param $0 i32)
  (block $block
   (@metadata.code.branch_hint "\00")
   (br_if $block
    (i32.const 0)
   )
  )
 )

 ;; CHECK:      (func $caller (type $0)
 ;; CHECK-NEXT:  (call $callee_2)
 ;; CHECK-NEXT: )
 (func $caller
  (call $callee
   (i32.const 0)
  )
 )
)

