;; NOTE: Assertions have been generated by update_lit_checks.py --all-items and should not be edited.
;; RUN: foreach %s %t wasm-opt -all --gufa -S -o - | filecheck %s

(module
  (global $foo (mut (ref string)) (string.const "foo"))

  (global $bar (mut (ref string)) (string.const "bar"))

  (func $get
    ;; $foo can be optimized to a string.const, but not $bar which is modified
    ;; in the function below us.
    (drop
      (global.get $foo)
    )
    (drop
      (global.get $bar)
    )
  )

  (func $set
    (global.set $bar
      (string.const "bar2")
    )
  )
)
