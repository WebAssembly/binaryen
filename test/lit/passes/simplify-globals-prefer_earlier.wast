;; NOTE: Assertions have been generated by update_lit_checks.py --all-items and should not be edited.
;; NOTE: This test was ported using port_passes_tests_to_lit.py and could be cleaned up.

;; RUN: foreach %s %t wasm-opt --simplify-globals -S -o - | filecheck %s

;; When a global is copied into another, prefer the earlier one in later gets.
(module
  (global $global1 i32 (i32.const 42))
  (global $global2 i32 (global.get $global1))
  (global $global3 i32 (global.get $global2))

  (func $simple
    (drop
      (global.get $global1)
    )
    (drop
      (global.get $global2)
    )
    (drop
      (global.get $global3)
    )
  )
)
