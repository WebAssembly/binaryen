;; NOTE: Assertions have been generated by update_lit_checks.py
;; RUN: wasm-opt %s --optimize-instructions --enable-threads -S -o - | filecheck %s

(module
 (import "env" "memory" (memory $0 (shared 256 256)))

 ;; CHECK: (func $x
 ;; CHECK:  (drop
 ;; CHECK:   (i32.shr_s
 ;; CHECK:    (i32.shl
 ;; CHECK:     (i32.atomic.load8_u
 ;; CHECK:      (i32.const 100)
 ;; CHECK:     )
 ;; CHECK:     (i32.const 24)
 ;; CHECK:    )
 ;; CHECK:    (i32.const 24)
 ;; CHECK:   )
 ;; CHECK:  )
 ;; CHECK: )
 (func $x
  (drop
   (i32.shr_s
    (i32.shl
     (i32.atomic.load8_u ;; can't be signed
      (i32.const 100)
     )
     (i32.const 24)
    )
    (i32.const 24)
   )
  )
 )
)
