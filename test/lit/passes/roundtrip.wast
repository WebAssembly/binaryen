;; NOTE: Assertions have been generated by update_lit_checks.py and should not be edited.
;; RUN: wasm-opt %s -all --roundtrip -S -o - | filecheck %s

(module
 ;; CHECK:      (type $none (func))
 (type $none (func))
 ;; CHECK:      (func $foo
 ;; CHECK-NEXT:  (local $0 funcref)
 ;; CHECK-NEXT:  (drop
 ;; CHECK-NEXT:   (block (result funcref)
 ;; CHECK-NEXT:    (local.set $0
 ;; CHECK-NEXT:     (ref.null func)
 ;; CHECK-NEXT:    )
 ;; CHECK-NEXT:    (drop
 ;; CHECK-NEXT:     (ref.func $foo)
 ;; CHECK-NEXT:    )
 ;; CHECK-NEXT:    (local.get $0)
 ;; CHECK-NEXT:   )
 ;; CHECK-NEXT:  )
 ;; CHECK-NEXT: )
 (func $foo
  (drop
   ;; a tuple type with a non-nullable element, that must be carefully handled
   (block (result funcref (ref $none))
    (tuple.make
     (ref.null func)
     (ref.func $foo)
    )
   )
  )
 )
)
