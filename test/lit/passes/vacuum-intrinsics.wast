;; NOTE: Assertions have been generated by update_lit_checks.py and should not be edited.
;; RUN: wasm-opt %s --vacuum -all -S -o - | filecheck %s

(module
  (import "binaryen-intrinsics" "consumer.used" (func $consumer.used (result i32)))

  (func $used
    (local $f64 f64)
    (local.set $f64
      (if (result f64)
        (call $consumer.used)
        (f64.const 3.14159)
        (f64.const 2.71828)
      )
    )
  )

  (func $unused
    (drop
      (if (result f64)
        (call $consumer.used)
        (f64.const 3.14159)
        (f64.const 2.71828)
      )
    )
  )

  (func $used-func-result (result f64)
    (if (result f64)
      (call $consumer.used)
      (f64.const 3.14159)
      (f64.const 2.71828)
    )
  )

  (func $unused-fallthrough
    (drop
      (block (result f64)
        (if (result f64)
          (call $consumer.used)
          (f64.const 3.14159)
          (f64.const 2.71828)
        )
      )
    )
  )
)
