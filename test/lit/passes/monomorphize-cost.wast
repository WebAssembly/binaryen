;; NOTE: Assertions have been generated by update_lit_checks.py --all-items and should not be edited.

;; RUN: foreach %s %t wasm-opt --monomorphize -all -S -o - | filecheck %s --check-prefix CAREFUL

(module
  (type $A (sub (struct (field i32))))

  (type $B (sub $A (struct (field i32))))

  (func $target-long (param $any anyref)
    (local $A (ref $A))
    ;; This function does a cast and then does a lot of other work.
    (local.set $A
      (ref.cast (ref $A)
        (local.get $any)
      )
    )
    ...long.. the % benefit is too small for us to monomoprhize, in this case.
  )

  (func $target-short (param $any anyref)
    (local $A (ref $A))
    ;; This function does a cast and little else.
    (local.set $A
      (ref.cast (ref $A)
        (local.get $any)
      )
    )
    ...short..
  )

  (func $calls (param $x i32) (param $y i32)


