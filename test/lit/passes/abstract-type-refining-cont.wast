;; NOTE: Assertions have been generated by update_lit_checks.py --all-items and should not be edited.

;; RUN: foreach %s %t wasm-opt --abstract-type-refining -all --closed-world -S -o - | filecheck %s

(module
 (rec
  (type $func (func))
  (type $cont (cont $func))

  ;; This type is never created, so we optimize and rebuild types. While doing
  ;; so we should not get confused as we copy the continuation type, which
  ;; should end up referring properly to the corresponding func type.
  (type $uncreated (struct))
 )

 (func $func (type $func)
 )

 (func $test (type $func)
  (drop
   (cont.new $cont
    (ref.func $func)
   )
  )
 )
)

