;; NOTE: Assertions have been generated by update_lit_checks.py --output=fuzz-exec and should not be edited.

;; RUN: wasm-opt %s -all --fuzz-exec -q -o /dev/null 2>&1 | filecheck %s

(module
 (tag $tag (param externref))

 ;; CHECK:      [fuzz-exec] calling catch-null
 (func $catch-null (export "catch-null")
  (try $label$3
   (do
    ;; Throw a null.
    (throw $tag
     (ref.null noextern)
    )
   )
   (catch $tag
    ;; The popped type here is more refined than external (it is a bottom type)
    ;; which we should not error on.
    (drop
     (pop externref)
    )
   )
  )
 )
)
;; CHECK:      [fuzz-exec] calling catch-null
;; CHECK-NEXT: [fuzz-exec] comparing catch-null
