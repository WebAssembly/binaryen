;; NOTE: Assertions have been generated by update_lit_checks.py --output=fuzz-exec and should not be edited.

;; RUN: wasm-opt %s -all --remove-unused-module-elements --fuzz-exec -o /dev/null 2>&1 | filecheck %s

;; The global here can be optimized out as it has no uses. That has a noticeable
;; effect, however, of avoiding a host limit exception. We should ignore that in
;; fuzz exec and not error.

(module
 (type $type$0 (array i8))

 (import "fuzzing-support" "log-i32" (func $log (param i32)))

 (global $global (mut (ref $type$0)) (array.new_default $type$0
  (i32.const -1)
 ))

 ;; CHECK:      [fuzz-exec] calling export
 ;; CHECK-NEXT: [LoggingExternalInterface logging 42]
 ;; CHECK-NEXT: ignoring comparison of ExecutionResults!
 (func $export (export "export")
  (call $log
   (i32.const 42)
  )
 )
)
