;; NOTE: Assertions have been generated by update_lit_checks.py --output=fuzz-exec and should not be edited.

;; RUN: wasm-opt %s -all --fuzz-exec-before -q -o /dev/null 2>&1 | filecheck %s

(module
  (memory $0 1)

  (func $grow2 (export "grow2") (result i32)
    ;; The nested grow will increase the size from 1 to 3, and return the old
    ;; size, 1. Then the outer grow will grow by that amount 1, from 3 to 4.
    (memory.grow
      (memory.grow
        (i32.const 2)
      )
    )
  )

  (func $measure (export "measure") (result i32)
    ;; This should return the final size, 4.
    (memory.size)
  )
)
