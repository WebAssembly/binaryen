;; NOTE: Assertions have been generated by update_lit_checks.py --output=fuzz-exec and should not be edited.

;; RUN: wasm-opt %s -all --fuzz-exec-before -q -o /dev/null 2>&1 | filecheck %s

(module
  (import "binaryen-intrinsics" "call.without.effects" (func $cwe (param i32 funcref) (result i32)))

  ;; CHECK:      [fuzz-exec] calling get-ref
  ;; CHECK-NEXT: [fuzz-exec] note result: get-ref => 42
  (func "get-ref" (result i32)
    (call $cwe
      (i32.const 41)
      (ref.func $add-one)
    )
  )

  (func $add-one (param $x i32) (result i32)
    (i32.add
      (local.get $x)
      (i32.const 1)
    )
  )
)

