;; NOTE: Assertions have been generated by update_lit_checks.py --output=fuzz-exec and should not be edited.

;; RUN: wasm-opt %s --hybrid -all --signature-pruning --closed-world --fuzz-exec -q -o /dev/null 2>&1 | filecheck %s

(module
  (type $f (func (param i32)))

  (func $no-use-param (type $f) (param i32)
    (unreachable)
  )

  ;; The type of the reference this function returns will change as a result of
  ;; signature pruning. The fuzzer should not complain about this.
  ;; CHECK:      [fuzz-exec] calling return-ref
  ;; CHECK-NEXT: [fuzz-exec] note result: return-ref => funcref
  (func "return-ref" (result funcref)
    (ref.func $no-use-param)
  )
)
;; CHECK:      [fuzz-exec] calling return-ref
;; CHECK-NEXT: [fuzz-exec] note result: return-ref => funcref
;; CHECK-NEXT: [fuzz-exec] comparing return-ref
